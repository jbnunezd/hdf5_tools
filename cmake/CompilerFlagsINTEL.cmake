#--------------------------------------------------------------------------------------------------#
# Compiler Flags :: Intel
#--------------------------------------------------------------------------------------------------#
GET_FILENAME_COMPONENT (C_COMPILER_NAME ${CMAKE_C_COMPILER} NAME)
GET_FILENAME_COMPONENT (CXX_COMPILER_NAME ${CMAKE_CXX_COMPILER} NAME)
GET_FILENAME_COMPONENT (Fortran_COMPILER_NAME ${CMAKE_Fortran_COMPILER} NAME)
#--------------------------------------------------------------------------------------------------#
SET(MAIN_FILENAME_FLAG "-D__FILENAME__='\"$(subst ${CMAKE_SOURCE_DIR}/,,$(abspath $(<)))\"'")
IF (CMAKE_Fortran_COMPILER_ID MATCHES "Intel")
  # OVERALL
  SET(MAIN_FLAGS_OVERALL "")
  SET(MAIN_FLAGS_OVERALL "${MAIN_FLAGS_OVERALL} -fpp -assume bscc")
  # MACHINE
  SET(MAIN_FLAGS_MACHINE "")
  SET(MAIN_FLAGS_MACHINE "${MAIN_FLAGS_MACHINE} -xCORE-AVX2")
  # OPTIMIZATION
  SET(MAIN_FLAGS_OPTIMIZATION "")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -O3")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -ipo")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -no-prec-div")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -unroll-aggressive")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -finline-functions")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -finline-limit=1500")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -inline-max-size=1500")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -no-inline-max-total-size")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -qopt-report=5")
  SET(MAIN_FLAGS_OPTIMIZATION "${MAIN_FLAGS_OPTIMIZATION} -qopt-report-phase=all")
  # COMMON CXX
  SET(MAIN_CXX_FLAGS_OVERALL "")
  SET(MAIN_CXX_FLAGS_OVERALL "${MAIN_CXX_FLAGS_OVERALL} -DINTEL")
  SET(MAIN_CXX_FLAGS_OVERALL "${MAIN_CXX_FLAGS_OVERALL} -std=c++17")
  SET(MAIN_CXX_FLAGS_OVERALL "${MAIN_CXX_FLAGS_OVERALL} ${MAIN_FILENAME_FLAG}")
  # COMMON FORTRAN
  SET(MAIN_Fortran_FLAGS_OVERALL "")
  SET(MAIN_Fortran_FLAGS_OVERALL "${MAIN_Fortran_FLAGS_OVERALL} -DINTEL")
  SET(MAIN_Fortran_FLAGS_OVERALL "${MAIN_Fortran_FLAGS_OVERALL} -r8")
  SET(MAIN_Fortran_FLAGS_OVERALL "${MAIN_Fortran_FLAGS_OVERALL} -i4")
  SET(MAIN_Fortran_FLAGS_OVERALL "${MAIN_Fortran_FLAGS_OVERALL} -shared-intel")
  SET(MAIN_Fortran_FLAGS_OVERALL "${MAIN_Fortran_FLAGS_OVERALL} ${MAIN_FILENAME_FLAG}")
  # COMMON DEBUGGING & CODE GENERATION
  SET(MAIN_FLAGS_DEBUGGING "")
  SET(MAIN_FLAGS_DEBUGGING "${MAIN_FLAGS_DEBUGGING} -g")
  SET(MAIN_FLAGS_DEBUGGING "${MAIN_FLAGS_DEBUGGING} -O0")
  SET(MAIN_FLAGS_DEBUGGING "${MAIN_FLAGS_DEBUGGING} -traceback")
  # DEBUGGING & CODE GENERATION - CXX
  SET(MAIN_CXX_FLAGS_DEBUGGING "")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -Wall")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -Weffc++")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -Wformat=2")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -Wfloat-equal")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -fp-trap=divzero")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -fp-trap=invalid")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -fp-trap=overflow")
  SET(MAIN_CXX_FLAGS_DEBUGGING "${MAIN_CXX_FLAGS_DEBUGGING} -fp-trap=underflow")
  # DEBUGGING & CODE GENERATION - FORTRAN
  SET(MAIN_Fortran_FLAGS_DEBUGGING "")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -warn all")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -fpe0")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -ftrapuv")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -init=snan")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -init=arrays")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check all")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check bounds")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check noarg_temp_created")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check noformat")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check nooutput_conversion")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check pointer")
  SET(MAIN_Fortran_FLAGS_DEBUGGING "${MAIN_Fortran_FLAGS_DEBUGGING} -check uninit")
  
  # CMAKE COMMON FLAGS: CXX + FORTRAN
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${MAIN_CXX_FLAGS_OVERALL}")
  SET(CMAKE_Fortran_FLAGS "${CMAKE_Fortran_FLAGS}")
  SET(CMAKE_Fortran_FLAGS "${CMAKE_Fortran_FLAGS} ${MAIN_Fortran_FLAGS_OVERALL}")
  # CMAKE RELEASE FLAGS: CXX + FORTRAN
  SET(CMAKE_CXX_FLAGS_RELEASE "")
  SET(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} ${MAIN_FLAGS_OPTIMIZATION}")
  SET(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} ${MAIN_FLAGS_MACHINE}")
  SET(CMAKE_Fortran_FLAGS_RELEASE "")
  SET(CMAKE_Fortran_FLAGS_RELEASE "${CMAKE_Fortran_FLAGS_RELEASE} ${MAIN_FLAGS_OPTIMIZATION}")
  SET(CMAKE_Fortran_FLAGS_RELEASE "${CMAKE_Fortran_FLAGS_RELEASE} ${MAIN_FLAGS_MACHINE}")
  # CMAKE PROFILE FLAGS: CXX + FORTRAN
  SET(CMAKE_CXX_FLAGS_PROFILE "")
  SET(CMAKE_CXX_FLAGS_PROFILE "${CMAKE_CXX_FLAGS_PROFILE} -pg")
  SET(CMAKE_CXX_FLAGS_PROFILE "${CMAKE_CXX_FLAGS_PROFILE} ${MAIN_FLAGS_OPTIMIZATION}")
  SET(CMAKE_CXX_FLAGS_PROFILE "${CMAKE_CXX_FLAGS_PROFILE} ${MAIN_FLAGS_MACHINE}")
  SET(CMAKE_Fortran_FLAGS_PROFILE "")
  SET(CMAKE_Fortran_FLAGS_PROFILE "${CMAKE_Fortran_FLAGS_PROFILE} -pg")
  SET(CMAKE_Fortran_FLAGS_PROFILE "${CMAKE_Fortran_FLAGS_PROFILE} ${MAIN_FLAGS_OPTIMIZATION}")
  SET(CMAKE_Fortran_FLAGS_PROFILE "${CMAKE_Fortran_FLAGS_PROFILE} ${MAIN_FLAGS_MACHINE}")
  # CMAKE DEBUG FLAGS: CXX + FORTRAN
  SET(CMAKE_CXX_FLAGS_DEBUG "")
  SET(CMAKE_CXX_FLAGS_DEBUG "${MAIN_FLAGS_DEBUGGING}")
  SET(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} ${MAIN_CXX_FLAGS_DEBUGGING}")
  SET(CMAKE_Fortran_FLAGS_DEBUG "")
  SET(CMAKE_Fortran_FLAGS_DEBUG "${MAIN_FLAGS_DEBUGGING}")
  SET(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} ${MAIN_Fortran_FLAGS_DEBUGGING}")
ENDIF()
#--------------------------------------------------------------------------------------------------#
